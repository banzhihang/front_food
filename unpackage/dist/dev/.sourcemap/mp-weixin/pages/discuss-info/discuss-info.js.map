{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/m/Documents/HBuilderProjects/food/pages/discuss-info/discuss-info.vue?61f9","webpack:///C:/Users/m/Documents/HBuilderProjects/food/pages/discuss-info/discuss-info.vue?f004","webpack:///C:/Users/m/Documents/HBuilderProjects/food/pages/discuss-info/discuss-info.vue?8d1d","webpack:///C:/Users/m/Documents/HBuilderProjects/food/pages/discuss-info/discuss-info.vue?9f01","uni-app:///pages/discuss-info/discuss-info.vue","webpack:///C:/Users/m/Documents/HBuilderProjects/food/pages/discuss-info/discuss-info.vue?f4b1","webpack:///C:/Users/m/Documents/HBuilderProjects/food/pages/discuss-info/discuss-info.vue?7d3f"],"names":["createPage","Page"],"mappings":"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","file":"pages/discuss-info/discuss-info.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/discuss-info/discuss-info.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./discuss-info.vue?vue&type=template&id=d77b3034&scoped=true&\"\nvar renderjs\nimport script from \"./discuss-info.vue?vue&type=script&lang=js&\"\nexport * from \"./discuss-info.vue?vue&type=script&lang=js&\"\nimport style0 from \"./discuss-info.vue?vue&type=style&index=0&id=d77b3034&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d77b3034\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/discuss-info/discuss-info.vue\"\nexport default component.exports","export * from \"-!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./discuss-info.vue?vue&type=template&id=d77b3034&scoped=true&\"","var components\ntry {\n  components = {\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n      )\n    },\n    myLoading: function() {\n      return import(\n        /* webpackChunkName: \"components/my-loading/my-loading\" */ \"@/components/my-loading/my-loading.vue\"\n      )\n    },\n    uParse: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-parse/u-parse\" */ \"@/uview-ui/components/u-parse/u-parse.vue\"\n      )\n    },\n    uImage: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-image/u-image\" */ \"@/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uGap: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-gap/u-gap\" */ \"@/uview-ui/components/u-gap/u-gap.vue\"\n      )\n    },\n    uTabs: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-tabs/u-tabs\" */ \"@/uview-ui/components/u-tabs/u-tabs.vue\"\n      )\n    },\n    uLine: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-line/u-line\" */ \"@/uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n    discussComment: function() {\n      return import(\n        /* webpackChunkName: \"components/discuss-comment/discuss-comment\" */ \"@/components/discuss-comment/discuss-comment.vue\"\n      )\n    },\n    inputCommentReply: function() {\n      return import(\n        /* webpackChunkName: \"components/input-comment-reply/input-comment-reply\" */ \"@/components/input-comment-reply/input-comment-reply.vue\"\n      )\n    },\n    uPopup: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uAlertTips: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-alert-tips/u-alert-tips\" */ \"@/uview-ui/components/u-alert-tips/u-alert-tips.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./discuss-info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./discuss-info.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<u-empty text=\"数据为空\" mode=\"data\" v-if=\"showEmpty\"></u-empty>\r\n\t\t<my-loading :active=\"showLoading\" v-if=\"showLoading && !showEmpty\"></my-loading>\r\n\t\t<view class=\"box\" v-if=\"!showLoading && !showEmpty\">\r\n\t\t\t<view class=\"top\">\r\n\t\t\t\t<view class=\"userinfo\">\r\n\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t<image :src=\"discussInfo.user_head_portrait\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<view class=\"name\">{{ discussInfo.user_nick_name }}</view>\r\n\t\t\t\t\t\t\t<text class=\"push\">发布讨论</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"time\">\r\n\t\t\t\t\t\t\t<text>{{discussInfo.add_time}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t<text class=\"title\">{{discussInfo.title}}</text>\r\n\t\t\t\t\t<view class=\"detail\">\r\n\t\t\t\t\t\t<u-parse :html=\"discussInfo.content\"></u-parse>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 显示照片 -->\r\n\t\t\t\t<view class=\"photo-box\">\r\n\t\t\t\t\t<view v-for=\"(item,index) in discussInfo.image\" :key=\"index\" class=\"photoInfo uni-thumb\">\r\n\t\t\t\t\t\t<u-image :src=\"item\" @click=\"prePhoto(index)\" mode=\"widthFix\" border-radius=\"25rpx\"></u-image>\r\n\t\t\t\t\t\t<view style=\"height: 1rpx;\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"gap\">\r\n\t\t\t\t<u-gap height=\"18\" bg-color=\"#EFF3F2\"></u-gap>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"mid\">\r\n\t\t\t\t<view class=\"tab\">\r\n\t\t\t\t\t<view class=\"tab-title\"><u-tabs :list=\"tabList\" :is-scroll=\"false\" font-size=\"30\" inactive-color=\"#b5b5bb\"\r\n\t\t\t\t\t\tactive-color=\"#585758\"></u-tabs></view>\r\n\t\t\t\t\t<view class=\"bottom-line\">\r\n\t\t\t\t\t\t<u-line color=\"#e0dde3\" length=\"900rpx\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom\">\r\n\t\t\t\t<discuss-comment @reply=\"replyHandle\" :link=\"discussInfo.comment_link\" ref=\"comment\"></discuss-comment>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"comment-input\" :style=\"'bottom:'+KeyboardHeight+'px;'\">\r\n\t\t\t<input-comment-reply ref=\"commentInputRef\" kind=\"评论\" :targetUserName=\"discussInfo.user_nick_name\"\r\n\t\t\t\t:targetUserId=\"discussInfo.user\" @throwData=\"startCommentAndReply\">\r\n\t\t\t</input-comment-reply>\r\n\t\t</view>\r\n\t\t<!-- 错误提示 -->\r\n\t\t<u-popup v-model=\"showError\" mode=\"bottom\" length=\"70%\" @close=\"closeError\" :closeable=\"true\"\r\n\t\t\tclose-icon-size=\"44\" border-radius=\"40\">\r\n\t\t\t<view class=\"err-title\">请更正以下错误</view>\r\n\t\t\t<view class=\"err-item\">\r\n\t\t\t\t<view v-for=\"item,index in errInfo\" :key=\"index\">\r\n\t\t\t\t\t<u-alert-tips type=\"error\" :title=\"item.name\" :description=\"item.value\" :show-icon=\"true\">\r\n\t\t\t\t\t</u-alert-tips>\r\n\t\t\t\t\t<view style=\"height: 20rpx;\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport commentInput from '@/components/input-comment-reply/input-comment-reply.vue'\r\n\timport discussComment from '@/components/discuss-comment/discuss-comment.vue'\r\n\timport Schema from 'async-validator';\r\n\timport {\r\n\t\trevertPushDomain,\r\n\t\tcommentPushDomain\r\n\t} from '../../util/api.js';\r\n\timport {\r\n\t\tencrypt\r\n\t} from '../../util/encrypt/encrypt.js'\r\n\timport {\r\n\t\tcheckLogin\r\n\t} from '../../util/checkLogin.js'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tKeyboardHeight: 0,\r\n\t\t\t\tshowLoading: true,\r\n\t\t\t\tdiscussInfo: {},\r\n\t\t\t\ttabList:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname:\"评论\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tphotoUrlList: [],\r\n\t\t\t\terrInfo: [],\r\n\t\t\t\tshowError: false,\r\n\t\t\t\tcommentErrDict: {\r\n\t\t\t\t\tcontent: \"评论内容\"\r\n\t\t\t\t},\r\n\t\t\t\trevertErrDict: {\r\n\t\t\t\t\tcontent: \"回复内容\"\r\n\t\t\t\t},\r\n\t\t\t\tshowEmpty:false\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tdiscussComment,\r\n\t\t\tcommentInput\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 处理子组件的回复事件\r\n\t\t\treplyHandle(e) {\r\n\t\t\t\t// 调用回复组件的editStart方法\r\n\t\t\t\tthis.$refs.commentInputRef.editStart(e.kind, e.targetUserName, e.targetUserId, e.extra)\r\n\t\t\t},\r\n\t\t\t// 获得讨论数据\r\n\t\t\tasync getDiscussInfo(link) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata: res\r\n\t\t\t\t} = await this.$http.get(link, {\r\n\t\t\t\t\t\"baseURL\": \"\"\r\n\t\t\t\t})\r\n\t\t\t\tif (res.code !== \"3\") {\r\n\t\t\t\t\tthis.discussInfo = res.data\r\n\t\t\t\t\tthis.showLoading = false\r\n\t\t\t\t\tthis.showEmpty = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showLoading = false\r\n\t\t\t\t\tthis.showEmpty = true\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tprePhoto(index) {\r\n\t\t\t\tif (this.photoUrlList.length === 0) {\r\n\t\t\t\t\tthis.discussInfo.image.forEach((element) => {\r\n\t\t\t\t\t\tthis.photoUrlList.push(element)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: this.photoUrlList,\r\n\t\t\t\t\tcurrent: this.photoUrlList[index],\r\n\t\t\t\t\tindicator: \"number\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 真正发起数据请求\r\n\t\t\tasync subPostData(data, push_url, type, extra) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"发布中\",\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t})\r\n\t\t\t\tconst url = push_url\r\n\t\t\t\tconst enData = encrypt(data)\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdata: res\r\n\t\t\t\t} = await this.$http.post(url, enData)\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t\tlet that = this\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"发布成功\",\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tthat.$refs.commentInputRef.editEnd()\r\n\t\t\t\t\t\tif (type === \"评论\") {\r\n\t\t\t\t\t\t\tthat.$refs.comment.insertComment(res.data)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.$refs.comment.insertReply(res.data, extra)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// 发布评论\r\n\t\t\tpushComment(push_data) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tcontent: push_data.content,\r\n\t\t\t\t\tdiscuss: this.discussInfo.id\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst descriptor = {\r\n\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\tmax: 30,\r\n\t\t\t\t\t\tmin: 1,\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"评论内容最少一个字\"\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst validator = new Schema(descriptor)\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconst pushUrl = commentPushDomain\r\n\t\t\t\tvalidator.validate(data, (errors, fields) => {\r\n\t\t\t\t\t// 构建错误信息\r\n\t\t\t\t\tif (errors) {\r\n\t\t\t\t\t\tfor (var item in errors) {\r\n\t\t\t\t\t\t\tlet tmp = {\r\n\t\t\t\t\t\t\t\tname: that.commentErrDict[errors[item].field],\r\n\t\t\t\t\t\t\t\tvalue: errors[item].message\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.errInfo.push(tmp)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.showError = true\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.subPostData(data, pushUrl, \"评论\", push_data.extra)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 发布回复\r\n\t\t\tpushRevert(push_data) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tcontent: push_data.content,\r\n\t\t\t\t\tcomment: push_data.extra.commentId,\r\n\t\t\t\t\ttarget_user: push_data.targetUserId\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst descriptor = {\r\n\t\t\t\t\tcontent: {\r\n\t\t\t\t\t\ttype: \"string\",\r\n\t\t\t\t\t\tmax: 30,\r\n\t\t\t\t\t\tmin: 1,\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: \"回复内容最少一个字\"\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst validator = new Schema(descriptor)\r\n\t\t\t\tconst that = this\r\n\t\t\t\tconst pushUrl = revertPushDomain\r\n\t\t\t\tvalidator.validate(data, (errors, fields) => {\r\n\t\t\t\t\t// 构建错误信息\r\n\t\t\t\t\tif (errors) {\r\n\t\t\t\t\t\tfor (var item in errors) {\r\n\t\t\t\t\t\t\tlet tmp = {\r\n\t\t\t\t\t\t\t\tname: that.revertErrDict[errors[item].field],\r\n\t\t\t\t\t\t\t\tvalue: errors[item].message\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.errInfo.push(tmp)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.showError = true\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.subPostData(data, pushUrl, \"回复\", push_data.extra)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 接受评论或者回复组件抛出的数据\r\n\t\t\tstartCommentAndReply(data) {\r\n\t\t\t\t// 先检查用户是否登录\r\n\t\t\t\tconst canContinue = checkLogin()\r\n\t\t\t\tif (!canContinue) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst kind = data.kind\r\n\t\t\t\tif (kind === \"评论\") {\r\n\t\t\t\t\tthis.pushComment(data)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.pushRevert(data)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 关闭错误提示\r\n\t\t\tcloseError() {\r\n\t\t\t\tthis.errInfo = []\r\n\t\t\t},\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tlet data = JSON.parse(decodeURIComponent(options.item))\r\n\t\t\tthis.getDiscussInfo(data.link)\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\tthis.KeyboardHeight = res.height\r\n\t\t\t})\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\r\n\t\t\t})\r\n\t\t},\r\n\t\tonReachBottom() {\r\n\t\t\tthis.$refs.comment.pullUp()\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\t\"discussInfo.comment_number\":{\r\n\t\t\t\thandler: function(newVal,oldVal){\r\n\t\t\t\t\tif (newVal !== undefined) {\r\n\t\t\t\t\t\tthis.tabList[0].name = \"评论 \" + newVal.toString()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.box {\r\n\t\tmargin: 0 25rpx 0 25rpx;\r\n\r\n\t}\r\n\r\n\t.comment-input {\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tz-index: 5000;\r\n\t}\r\n\r\n\t.top {\r\n\t\t.userinfo {\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t.left {\r\n\t\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 74rpx;\r\n\t\t\t\t\theight: 74rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tbackground-color: #f2f2f2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.right {\r\n\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.name {\r\n\t\t\t\t\tfont-size: 29rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.push {\r\n\t\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\t\tcolor: #808080;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.time {\r\n\t\t\t\t\ttext {\r\n\t\t\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\t\t\tcolor: #808080;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t\tmargin-top: 10rpx;\r\n\r\n\t\t\t.title {\r\n\t\t\t\tfont-size: 48rpx;\r\n\t\t\t\tfont-weight: bold\r\n\t\t\t}\r\n\r\n\t\t\t.detail {\r\n\t\t\t\tmargin-top: 30rpx;\r\n\t\t\t\tfont-size: 35rpx;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t.gap {\r\n\t\tmargin-top: 30rpx;\r\n\t\twidth: 900rpx;\r\n\t\tmargin-left: -100rpx;\r\n\t}\r\n\r\n\t.mid {\r\n\t\t.tab {\r\n\t\t\twidth: 100%;\r\n\t\t\t.tab-title {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t}\r\n\t\t\t.bottom-line {\r\n\t\t\t\tmargin-top: -7rpx;\r\n\t\t\t\tmargin-left: -100rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.err-item {\r\n\t\tmargin-top: 70rpx;\r\n\t\tpadding-left: 20rpx;\r\n\t\tpadding-right: 20rpx;\r\n\t}\r\n\r\n\t.err-title {\r\n\t\tmargin-top: 60rpx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 40rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./discuss-info.vue?vue&type=style&index=0&id=d77b3034&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./discuss-info.vue?vue&type=style&index=0&id=d77b3034&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1637305063171\n      var cssReload = require(\"C:/HBuilderX.2.9.8.20201110.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}