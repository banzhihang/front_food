(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/search/location"],{2060:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("a34a")),a=e("f1ac");function c(t){return t&&t.__esModule?t:{default:t}}function i(t,n,e,o,a,c,i){try{var r=t[c](i),u=r.value}catch(s){return void e(s)}r.done?n(u):Promise.resolve(u).then(o,a)}function r(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var c=t.apply(n,e);function r(t){i(c,o,a,r,u,"next",t)}function u(t){i(c,o,a,r,u,"throw",t)}r(void 0)}))}}var u={props:{locationStr:{type:String}},name:"locationUi",data:function(){return{locationName:"北京市朝阳区",needGetNameFromBackend:!0}},methods:{getLocationShowName:function(t){return t.length>8?t.slice(0,8)+"...":t},getUserLocation:function(){var n=this;t.authorize({scope:"scope.userLocation",success:function(){t.getLocation({success:function(){var t=r(o.default.mark((function t(e){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.location=e.latitude.toString()+","+e.longitude.toString(),n.getLocationName();case 2:case"end":return t.stop()}}),t)})));function e(n){return t.apply(this,arguments)}return e}(),fail:function(){var t=r(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.getLocationName(),console.log("获取定位失败失败");case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()})},fail:function(){(0,a.getUserInfoFail)()}})},getLocationName:function(){var t=this;return r(o.default.mark((function n(){var e,a,c;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e="/location",n.next=3,t.$http.get(e,{params:{location:t.locationStr}});case 3:a=n.sent,c=a.data,t.locationName=c.data.address_name;case 6:case"end":return n.stop()}}),n)})))()},chooseLocation:function(){var n=this;t.authorize({scope:"scope.userLocation",success:function(e){t.chooseLocation({success:function(t){console.log(t),t.name?(n.needGetNameFromBackend=!1,n.locationName=t.name):(n.needGetNameFromBackend=!0,n.locationName="."),n.$emit("chooseLocation",t)}})},fail:function(t){(0,a.getUserInfoFail)()}})}},watch:{locationStr:{immediate:!0,handler:function(t,n){""!==t&&this.needGetNameFromBackend&&this.getLocationName()}}}};n.default=u}).call(this,e("543d")["default"])},"237a":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return o}));var o={uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"609f"))}},a=function(){var t=this,n=t.$createElement,e=(t._self._c,t.getLocationShowName(t.locationName));t.$mp.data=Object.assign({},{$root:{m0:e}})},c=[]},"335e":function(t,n,e){"use strict";(function(t){e("1111");o(e("66fd"));var n=o(e("ff02"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},3421:function(t,n,e){"use strict";e.r(n);var o=e("2060"),a=e.n(o);for(var c in o)"default"!==c&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=a.a},da2a:function(t,n,e){},f86f:function(t,n,e){"use strict";var o=e("da2a"),a=e.n(o);a.a},ff02:function(t,n,e){"use strict";e.r(n);var o=e("237a"),a=e("3421");for(var c in a)"default"!==c&&function(t){e.d(n,t,(function(){return a[t]}))}(c);e("f86f");var i,r=e("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"21b17cd4",null,!1,o["a"],i);n["default"]=u.exports}},[["335e","common/runtime","common/vendor"]]]);